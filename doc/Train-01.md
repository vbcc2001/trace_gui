# 培训：第一节课

1. 本地环境部署

- java、maven配置
- 客户端运行  （java FX 框架，详见readme.md文件）
- 服务端运行 （标准Springboot 框架，详见readme.md文件）
- 服务端第1个参数 -Dport 自定义端口，小米默认9000（pom.xml配置）
- 服务端第1个参数 -Dport 自定义端口，素士默认9001（pom.xml配置）
- 服务端第2个参数 -P 版本，不填默认素士:sushi（pom.xml配置）
- 服务端第2个参数 -P 版本，小米：-Pxiaomi（pom.xml配置）
- 目前工厂只用过小米版，素士版没正式使用和全面测试，可能有些BUG，建议先进行试生产。
- 服务端的数据库用的h2 database，集成在java中，不用独立安装。也不用初始化，服务端会自动建表等操作。用户名密码都是kwanhor（application.yml配置）
- h2数据库可直接通过浏览器访问http://127.0.0.1:服务端口号/h2，小米版本JDBC URL: jdbc:h2:../db_v3_xiaomi/base，小米版本JDBC URL: jdbc:h2:../db_v3_sushi/base （application.yml配置）

2. 业务功能介绍

- （1）启动后先进行授权验证：验证文件存在：C:\Users\用户名\crt.txt ,如果没有或过期，就要重新申请授权
- （2）配置服务器端地址：http://服务器IP:端口号， 如 http://127.0.0.1:9000  ，配置正确就会进入到登录页面
- （3）登录，默认用户名admin,密码88888888
- （4）先配置用户及密码，对应菜单用户管理
- （5）首页功能：右上角功能：版本切换（小米/素士，前提配置好了2个服务端地址），在线升级（有升级服务器），申请授权
- （6）小米版产品设置：按小米产品规格添加产品，打印模板要提前开发好，名字规则：TP+ID
- （7）产品镭射：按小米标准输入，部分参数会缓存到C:\Users\用户名\cache.bin  文件下
- （8）产品镭射：SN码有2种录入方式：第一种点击生产SN码， 预生产，不会更新到产品表中; 第二种是直接扫描彩盒SN录入.
- （9）产品镭射：日期是固定，取的系统的当前日期
- （10） 彩盒扫描：录入功能：先打印标签，再录入数据库，（打印机配置在全局配置中配置，）（调试时候选pdf打印，方便调试）
- （11） 彩盒扫描：补打标签：只打印标签，不修改数据库
- （12）称重：要先经过彩盒扫描工序后，才可进行称重工序，并提前配置重量上下限，
- （13）称重：正常情况下，电脑要接好电子秤(在全局配置中配置好com口)（调试可以选择手动输入模式）
- （14）中箱装箱：先配置好参数，再点击开始装箱按钮，才会开启装箱模式，会自动生成中箱SN,
- （14）中箱装箱：达到装箱数量后，先打印标签，再录入数据库
- （15）栈板管理：同装箱
- （16）目的仓：只是打印目的仓标签
- （17）出货：先配置好参数，点击开始出货，启动出货模式，录入中箱或栈板直接出货
- （18）通用查询：按条件查询所有数据库中数据，
- （19）用户管理：生产用户日常生产，工程用户特殊操作审核
- （20）全局配置：允许录入产品SN：开启后可以跳过产品镭射
- （21）全局配置：必须称重：是否可以跳过称重工序，称重模式：是否开启手动称重
- （21）全局配置：打印机型号：选择电脑打印机
- （22）全局配置：DPI：如果是斑马打印机，按打印机实际DPI配置（203，300，600），如果不是斑马打印机（也可以按打印机实际DPI配置，应该没什么影响）。
- （23）全局配置：浓度：如果是斑马打印机，可以调整打印机浓度，一般不太好用（一般都是打印机自己内部设置）。
- （24）全局配置：斑马打印机：开启后打印采用ZPL格式，关闭后采用图片格式。根据打印机实际型号调整。
- （25）全局配置：服务器配置：服务端地址，格式：http://127.0.0.1:9000
- （26）全局配置：称重端口：选择秤连接的电脑的COM口 （推介青松柏）
- （27）全局配置：单位、最小度数：按秤实际配置（错了也没什么影响）
- （28）全局配置：稳定因子：读取数据间隔，会影响称重速度，默认3
- （29）首页右上角内容：客户端版本，服务端版本，服务端状态，用户名，授权时间 
